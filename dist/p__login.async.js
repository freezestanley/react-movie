(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"2hfb":function(e,a,t){e.exports={loginPage:"loginPage___sQ4k-"}},gqXj:function(e,a,t){"use strict";t.r(a);var n=t("d6i3"),M=t.n(n),c=t("1l/V"),j=t.n(c),N=t("p0pE"),i=t.n(N),s=t("qIgq"),o=t.n(s),D=t("q1tI"),r=t.n(D),I=t("pf/J"),u=t("lsKZ"),g=t("Tr0W"),l=t("/MKj"),d=t("TSYQ"),y=t.n(d),L=t("3a4m"),O=t.n(L),p=t("h/fk"),h=e=>{var a=e.className,t=e.onSend,n=e.duration,M=void 0===n?30:n,c=Object(D["useState"])(M),j=o()(c,2),N=j[0],i=j[1],s=Object(D["useState"])(1e3),I=o()(s,1),u=I[0],l=Object(D["useState"])(!1),d=o()(l,2),L=d[0],O=d[1],h=Object(D["useState"])("\u83b7\u53d6\u9a8c\u8bc1\u7801"),w=o()(h,2),z=w[0],A=w[1],T=Object(D["useState"])(!1),S=o()(T,2),m=S[0],E=S[1];Object(p["a"])(()=>{A("".concat(N-1,"s")),i(N-1),E(!0),1===N&&(O(!1),E(!1),A("\u91cd\u65b0\u53d1\u9001"))},L?u:null);var f=()=>{t&&t().then(e=>{e&&(A("".concat(M,"s")),E(!0),O(!0),i(M))})};return r.a.createElement(g["a"],{className:y()(a,"send-code"),size:"sm",disabled:m},m?z:r.a.createElement("span",{onClick:f},z))},w=t("uJMD"),z=t("2hfb"),A=t.n(z);function T(e){var a=Object(D["useReducer"])((e,a)=>i()({},e,a),{isRegistered:!0,disabled:!0,phone:"",verificationCode:""}),n=o()(a,2),c=n[0],N=n[1];Object(D["useEffect"])(()=>{c.phone&&c.verificationCode?N({disabled:!1}):N({disabled:!0})},[c.phone,c.verificationCode]);var s=(a,t)=>{N({[t]:a}),"phone"===t&&(11===a.length?e.dispatch({type:"user/checkRegistered",payload:a}).then(e=>{e||N({isRegistered:!1})}):N({isRegistered:!0}))},l=function(){var a=j()(M.a.mark(function a(){return M.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(Object(w["f"])(c.phone)){a.next=2;break}return a.abrupt("return");case 2:return e.dispatch({type:"user/sendCode",payload:c.phone}),a.abrupt("return",!0);case 4:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}(),d=()=>{if(c.phone){if(Object(w["f"])(c.phone))if(c.verificationCode){var a=w["c"].get("openId"),t={userName:c.phone,verifyCode:c.verificationCode};a&&(t.openId=a),e.dispatch({type:"user/login",payload:t}).then(a=>{a&&(e.dispatch({type:"user/getUserInfo",hasToast:!1}),O.a.push("/"))})}else I["a"].show("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801")}else I["a"].show("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")};return r.a.createElement("div",{className:y()(A.a.loginPage)},r.a.createElement("div",{className:"phone-control"},r.a.createElement(u["a"],{type:"tel",value:c.phone,className:"phone",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",maxLength:11,onChange:e=>s(e,"phone")}),c.phone&&r.a.createElement("img",{className:"phone-clear",src:t("wiAJ"),onClick:()=>N({phone:""}),alt:""})),r.a.createElement("div",{className:"code-control"},r.a.createElement(u["a"],{type:"tel",className:"code",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChange:e=>s(e,"verificationCode"),maxLength:6}),r.a.createElement(h,{duration:60,onSend:l})),!c.isRegistered&&r.a.createElement("p",{className:"login-tip"},"\u672a\u6ce8\u518c\u7684\u624b\u673a\u53f7\uff0c\u9a8c\u8bc1\u901a\u8fc7\u540e\u5c06\u81ea\u52a8\u6ce8\u518c"),r.a.createElement(g["a"],{block:!0,className:"login-btn",disabled:c.disabled,onClick:d},e.loading?"\u767b\u5f55\u4e2d":"\u767b\u5f55"))}a["default"]=Object(l["c"])(e=>({loading:e.loading.effects["user/login"]}))(T)},wiAJ:function(e,a){e.exports="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMjAgMjAiIHdpZHRoPSIyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtMTAuMDAwMDYgMGMtNS41MjI4NDA2NCAwLTEwLjAwMDAwMDA0IDQuNDc3MTU5MzktMTAuMDAwMDAwMDQgMTAgMCA1LjUyMjg0MDYgNC40NzcxNTk0IDEwIDEwLjAwMDAwMDA0IDEwIDUuNTIyODQwNiAwIDEwLTQuNDc3MTU5NCAxMC0xMCAwLTUuNTIyODQwNjEtNC40NzcxNTk0LTEwLTEwLTEwem00LjYzNDA0MDUgMTIuODY2NTk0Yy40ODgyNzI0LjQ4ODI3MjQuNDg4MjcyNCAxLjI3OTI5NDEgMCAxLjc2NzU4NjUtLjI0NDE0NjIuMjQ0MTQ2Mi0uNTYzOTY0Ny4zNjYyMDkyLS44ODM3ODMyLjM2NjIwOTJzLS42Mzk2NTctLjEyMjA2MzEtLjg4Mzc4MzItLjM2NjIwOTJsLTIuODY2MjE5My0yLjg2NjIxNDMtMi44NjYyMDkyOSAyLjg2NjE5NDNjLS4yNDQxNDYxOS4yNDQxNDYyLS41NjM5NjQ3MS4zNjYyMjkyLS44ODM3ODMyMS4zNjYyMjkyLS4zMTk4MTg0OSAwLS42Mzk2NTcwMS0uMTIyMDgzLS44ODM3ODMyMi0uMzY2MjI5Mi0uNDg4MjcyMzgtLjQ4ODI3MjQtLjQ4ODI3MjM4LTEuMjc5Mjk0MSAwLTEuNzY3NTg2NGwyLjg2NjIxNDI4LTIuODY2MjA2OC0yLjg2NjIzNDI2LTIuODY2MjAxODNjLS40ODgyNzIzOC0uNDg4MjcyMzgtLjQ4ODI3MjM4LTEuMjc5Mjk0MDQgMC0xLjc2NzU4NjQxLjQ4ODI3MjM4LS40ODgyOTIzNiAxLjI3OTI5NDA0LS40ODgyNzIzOCAxLjc2NzU4NjQxIDBsMi44NjYyMDkyOSAyLjg2NjIxNDI4IDIuODY2MjE5My0yLjg2NjIxNDI4Yy40ODgyNzI0LS40ODgyNzIzOCAxLjI3OTI5NC0uNDg4MjcyMzggMS43Njc1ODY0IDAgLjQ4ODI5MjQuNDg4MjcyMzkuNDg4MjcyNCAxLjI3OTI5NDA1IDAgMS43Njc1ODY0MWwtMi44NjYyMzQzIDIuODY2MjE0MzN6IiBvcGFjaXR5PSIuMDgiLz48L3N2Zz4="}}]);