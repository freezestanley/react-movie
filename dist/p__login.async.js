(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"2hfb":function(e,a,t){e.exports={loginPage:"loginPage___sQ4k-"}},gqXj:function(e,a,t){"use strict";t.r(a);var n=t("d6i3"),c=t.n(n),M=t("1l/V"),i=t.n(M),o=t("p0pE"),j=t.n(o),N=t("qIgq"),s=t.n(N),D=t("q1tI"),r=t.n(D),I=t("pf/J"),u=t("lsKZ"),g=t("Tr0W"),l=t("/MKj"),d=t("TSYQ"),y=t.n(d),L=t("3a4m"),p=t.n(L),O=t("h/fk"),w=e=>{var a=e.className,t=e.onSend,n=e.duration,c=void 0===n?30:n,M=Object(D["useState"])(c),i=s()(M,2),o=i[0],j=i[1],N=Object(D["useState"])(1e3),I=s()(N,1),u=I[0],l=Object(D["useState"])(!1),d=s()(l,2),L=d[0],p=d[1],w=Object(D["useState"])("\u83b7\u53d6\u9a8c\u8bc1\u7801"),h=s()(w,2),z=h[0],A=h[1],T=Object(D["useState"])(!1),f=s()(T,2),S=f[0],m=f[1];Object(O["a"])(()=>{A("".concat(o-1,"s")),j(o-1),m(!0),1===o&&(p(!1),m(!1),A("\u91cd\u65b0\u53d1\u9001"))},L?u:null);var E=()=>{t&&t().then(e=>{e&&(A("".concat(c,"s")),m(!0),p(!0),j(c))})};return r.a.createElement(g["a"],{className:y()(a,"send-code"),size:"sm",disabled:S},S?z:r.a.createElement("span",{onClick:E},z))},h=t("uJMD"),z=t("2hfb"),A=t.n(z);function T(e){var a=e.location.query.sourcePage,n=void 0===a?"":a,M=Object(D["useReducer"])((e,a)=>j()({},e,a),{isRegistered:!0,disabled:!0,phone:"",verificationCode:""}),o=s()(M,2),N=o[0],l=o[1];Object(D["useEffect"])(()=>{N.phone&&N.verificationCode?l({disabled:!1}):l({disabled:!0})},[N.phone,N.verificationCode]);var d=(a,t)=>{l({[t]:a}),"phone"===t&&(11===a.length?e.dispatch({type:"user/checkRegistered",payload:a}).then(e=>{e||l({isRegistered:!1})}):l({isRegistered:!0}))},L=function(){var a=i()(c.a.mark(function a(){return c.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(Object(h["f"])(N.phone)){a.next=2;break}return a.abrupt("return");case 2:return e.dispatch({type:"user/sendCode",payload:N.phone}),a.abrupt("return",!0);case 4:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}(),O=()=>{if(N.phone){if(Object(h["f"])(N.phone))if(N.verificationCode){var a=h["c"].get("openId"),t={userName:N.phone,verifyCode:N.verificationCode};a&&(t.openId=a),e.dispatch({type:"user/login",payload:t}).then(a=>{if(a)if(e.dispatch({type:"user/getUserInfo",hasToast:!1}),n){var t=window.decodeURIComponent(n);t=-1!==t.indexOf("?")?"".concat(t,"&ref=login"):"".concat(t,"?ref=login"),p.a.push(t)}else p.a.push("/")})}else I["a"].show("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801")}else I["a"].show("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")};return r.a.createElement("div",{className:y()(A.a.loginPage)},r.a.createElement("div",{className:"phone-control"},r.a.createElement(u["a"],{type:"tel",value:N.phone,className:"phone",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",maxLength:11,onChange:e=>d(e,"phone")}),N.phone&&r.a.createElement("img",{className:"phone-clear",src:t("wiAJ"),onClick:()=>l({phone:""}),alt:""})),r.a.createElement("div",{className:"code-control"},r.a.createElement(u["a"],{type:"tel",className:"code",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChange:e=>d(e,"verificationCode"),maxLength:6}),r.a.createElement(w,{duration:60,onSend:L})),!N.isRegistered&&r.a.createElement("p",{className:"login-tip"},"\u672a\u6ce8\u518c\u7684\u624b\u673a\u53f7\uff0c\u9a8c\u8bc1\u901a\u8fc7\u540e\u5c06\u81ea\u52a8\u6ce8\u518c"),r.a.createElement(g["a"],{block:!0,className:"login-btn",disabled:N.disabled,onClick:O},e.loading?"\u767b\u5f55\u4e2d":"\u767b\u5f55"))}a["default"]=Object(l["c"])(e=>({loading:e.loading.effects["user/login"]}))(T)},wiAJ:function(e,a){e.exports="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMjAgMjAiIHdpZHRoPSIyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtMTAuMDAwMDYgMGMtNS41MjI4NDA2NCAwLTEwLjAwMDAwMDA0IDQuNDc3MTU5MzktMTAuMDAwMDAwMDQgMTAgMCA1LjUyMjg0MDYgNC40NzcxNTk0IDEwIDEwLjAwMDAwMDA0IDEwIDUuNTIyODQwNiAwIDEwLTQuNDc3MTU5NCAxMC0xMCAwLTUuNTIyODQwNjEtNC40NzcxNTk0LTEwLTEwLTEwem00LjYzNDA0MDUgMTIuODY2NTk0Yy40ODgyNzI0LjQ4ODI3MjQuNDg4MjcyNCAxLjI3OTI5NDEgMCAxLjc2NzU4NjUtLjI0NDE0NjIuMjQ0MTQ2Mi0uNTYzOTY0Ny4zNjYyMDkyLS44ODM3ODMyLjM2NjIwOTJzLS42Mzk2NTctLjEyMjA2MzEtLjg4Mzc4MzItLjM2NjIwOTJsLTIuODY2MjE5My0yLjg2NjIxNDMtMi44NjYyMDkyOSAyLjg2NjE5NDNjLS4yNDQxNDYxOS4yNDQxNDYyLS41NjM5NjQ3MS4zNjYyMjkyLS44ODM3ODMyMS4zNjYyMjkyLS4zMTk4MTg0OSAwLS42Mzk2NTcwMS0uMTIyMDgzLS44ODM3ODMyMi0uMzY2MjI5Mi0uNDg4MjcyMzgtLjQ4ODI3MjQtLjQ4ODI3MjM4LTEuMjc5Mjk0MSAwLTEuNzY3NTg2NGwyLjg2NjIxNDI4LTIuODY2MjA2OC0yLjg2NjIzNDI2LTIuODY2MjAxODNjLS40ODgyNzIzOC0uNDg4MjcyMzgtLjQ4ODI3MjM4LTEuMjc5Mjk0MDQgMC0xLjc2NzU4NjQxLjQ4ODI3MjM4LS40ODgyOTIzNiAxLjI3OTI5NDA0LS40ODgyNzIzOCAxLjc2NzU4NjQxIDBsMi44NjYyMDkyOSAyLjg2NjIxNDI4IDIuODY2MjE5My0yLjg2NjIxNDI4Yy40ODgyNzI0LS40ODgyNzIzOCAxLjI3OTI5NC0uNDg4MjcyMzggMS43Njc1ODY0IDAgLjQ4ODI5MjQuNDg4MjcyMzkuNDg4MjcyNCAxLjI3OTI5NDA1IDAgMS43Njc1ODY0MWwtMi44NjYyMzQzIDIuODY2MjE0MzN6IiBvcGFjaXR5PSIuMDgiLz48L3N2Zz4="}}]);