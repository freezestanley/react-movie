(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"2hfb":function(e,a,t){e.exports={loginPage:"loginPage___sQ4k-"}},gqXj:function(e,a,t){"use strict";t.r(a);var n=t("Ico4"),c=t.n(n),M=t("UWy3"),i=t.n(M),o=t("mK77"),j=t.n(o),N=t("cO38"),s=t.n(N),r=t("ZZRV"),D=t.n(r),g=t("Y2Ur"),u=t("HaGd"),I=t("tE8r"),l=t("svyS"),d=t("iczh"),y=t.n(d),L=t("Sr5h"),O=t.n(L),p=t("h/fk"),h=e=>{var a=e.className,t=e.onSend,n=e.duration,c=void 0===n?30:n,M=Object(r["useState"])(c),i=s()(M,2),o=i[0],j=i[1],N=Object(r["useState"])(1e3),g=s()(N,1),u=g[0],l=Object(r["useState"])(!1),d=s()(l,2),L=d[0],O=d[1],h=Object(r["useState"])("\u83b7\u53d6\u9a8c\u8bc1\u7801"),w=s()(h,2),z=w[0],A=w[1],T=Object(r["useState"])(!1),S=s()(T,2),m=S[0],f=S[1];Object(p["a"])(()=>{A("".concat(o-1,"s")),j(o-1),f(!0),1===o&&(O(!1),f(!1),A("\u91cd\u65b0\u53d1\u9001"))},L?u:null);var E=()=>{t&&t().then(e=>{e&&(A("".concat(c,"s")),f(!0),O(!0),j(c))})};return D.a.createElement(I["a"],{className:y()(a,"send-code"),size:"sm",disabled:m},m?z:D.a.createElement("span",{onClick:E},z))},w=t("uJMD"),z=t("2hfb"),A=t.n(z);function T(e){var a=e.location.query.sourcePage,n=void 0===a?"":a,M=Object(r["useReducer"])((e,a)=>j()({},e,a),{isRegistered:!0,disabled:!0,phone:"",verificationCode:""}),o=s()(M,2),N=o[0],l=o[1];Object(r["useEffect"])(()=>{N.phone&&N.verificationCode?l({disabled:!1}):l({disabled:!0})},[N.phone,N.verificationCode]);var d=(a,t)=>{l({[t]:a}),"phone"===t&&(11===a.length?e.dispatch({type:"user/checkRegistered",payload:a}).then(e=>{e||l({isRegistered:!1})}):l({isRegistered:!0}))},L=function(){var a=i()(c.a.mark(function a(){return c.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(Object(w["g"])(N.phone)){a.next=2;break}return a.abrupt("return");case 2:return e.dispatch({type:"user/sendCode",payload:N.phone}),a.abrupt("return",!0);case 4:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}(),p=()=>{if(N.phone){if(Object(w["g"])(N.phone))if(N.verificationCode){var a=w["c"].get("openId"),t={userName:N.phone,verifyCode:N.verificationCode};a&&(t.openId=a),e.dispatch({type:"user/login",payload:t}).then(a=>{if(a)if(e.dispatch({type:"user/getUserInfo",hasToast:!1}),n){var t=window.decodeURIComponent(n);t=-1!==t.indexOf("?")?"".concat(t,"&ref=login"):"".concat(t,"?ref=login"),O.a.push(t)}else O.a.push("/")})}else g["a"].show("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801")}else g["a"].show("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")};return D.a.createElement("div",{className:y()(A.a.loginPage)},D.a.createElement("div",{className:"phone-control"},D.a.createElement(u["a"],{type:"tel",value:N.phone,className:"phone",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",maxLength:11,onChange:e=>d(e,"phone")}),N.phone&&D.a.createElement("img",{className:"phone-clear",src:t("wiAJ"),onClick:()=>l({phone:""}),alt:""})),D.a.createElement("div",{className:"code-control"},D.a.createElement(u["a"],{type:"tel",className:"code",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChange:e=>d(e,"verificationCode"),maxLength:6}),D.a.createElement(h,{duration:60,onSend:L})),!N.isRegistered&&D.a.createElement("p",{className:"login-tip"},"\u672a\u6ce8\u518c\u7684\u624b\u673a\u53f7\uff0c\u9a8c\u8bc1\u901a\u8fc7\u540e\u5c06\u81ea\u52a8\u6ce8\u518c"),D.a.createElement(I["a"],{block:!0,className:"login-btn",disabled:N.disabled,onClick:p},e.loading?"\u767b\u5f55\u4e2d...":"\u767b\u5f55"))}a["default"]=Object(l["c"])(e=>({loading:e.loading.effects["user/login"]}))(T)},wiAJ:function(e,a){e.exports="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMjAgMjAiIHdpZHRoPSIyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtMTAuMDAwMDYgMGMtNS41MjI4NDA2NCAwLTEwLjAwMDAwMDA0IDQuNDc3MTU5MzktMTAuMDAwMDAwMDQgMTAgMCA1LjUyMjg0MDYgNC40NzcxNTk0IDEwIDEwLjAwMDAwMDA0IDEwIDUuNTIyODQwNiAwIDEwLTQuNDc3MTU5NCAxMC0xMCAwLTUuNTIyODQwNjEtNC40NzcxNTk0LTEwLTEwLTEwem00LjYzNDA0MDUgMTIuODY2NTk0Yy40ODgyNzI0LjQ4ODI3MjQuNDg4MjcyNCAxLjI3OTI5NDEgMCAxLjc2NzU4NjUtLjI0NDE0NjIuMjQ0MTQ2Mi0uNTYzOTY0Ny4zNjYyMDkyLS44ODM3ODMyLjM2NjIwOTJzLS42Mzk2NTctLjEyMjA2MzEtLjg4Mzc4MzItLjM2NjIwOTJsLTIuODY2MjE5My0yLjg2NjIxNDMtMi44NjYyMDkyOSAyLjg2NjE5NDNjLS4yNDQxNDYxOS4yNDQxNDYyLS41NjM5NjQ3MS4zNjYyMjkyLS44ODM3ODMyMS4zNjYyMjkyLS4zMTk4MTg0OSAwLS42Mzk2NTcwMS0uMTIyMDgzLS44ODM3ODMyMi0uMzY2MjI5Mi0uNDg4MjcyMzgtLjQ4ODI3MjQtLjQ4ODI3MjM4LTEuMjc5Mjk0MSAwLTEuNzY3NTg2NGwyLjg2NjIxNDI4LTIuODY2MjA2OC0yLjg2NjIzNDI2LTIuODY2MjAxODNjLS40ODgyNzIzOC0uNDg4MjcyMzgtLjQ4ODI3MjM4LTEuMjc5Mjk0MDQgMC0xLjc2NzU4NjQxLjQ4ODI3MjM4LS40ODgyOTIzNiAxLjI3OTI5NDA0LS40ODgyNzIzOCAxLjc2NzU4NjQxIDBsMi44NjYyMDkyOSAyLjg2NjIxNDI4IDIuODY2MjE5My0yLjg2NjIxNDI4Yy40ODgyNzI0LS40ODgyNzIzOCAxLjI3OTI5NC0uNDg4MjcyMzggMS43Njc1ODY0IDAgLjQ4ODI5MjQuNDg4MjcyMzkuNDg4MjcyNCAxLjI3OTI5NDA1IDAgMS43Njc1ODY0MWwtMi44NjYyMzQzIDIuODY2MjE0MzN6IiBvcGFjaXR5PSIuMDgiLz48L3N2Zz4="}}]);