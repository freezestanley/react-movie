(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"2hfb":function(e,t,a){e.exports={loginPage:"loginPage___sQ4k-"}},gqXj:function(e,t,a){"use strict";a.r(t);var n=a("d6i3"),c=a.n(n),M=a("1l/V"),j=a.n(M),i=a("p0pE"),N=a.n(i),s=a("qIgq"),o=a.n(s),r=a("q1tI"),D=a.n(r),u=a("pf/J"),I=a("lsKZ"),l=a("Tr0W"),g=a("/MKj"),d=a("TSYQ"),y=a.n(d),L=a("3a4m"),O=a.n(L);function p(e,t){var a=Object(r["useRef"])();Object(r["useEffect"])(()=>{a.current=e},[e]),Object(r["useEffect"])(()=>{function e(){a.current()}if(null!==t){var n=setInterval(e,t);return()=>clearInterval(n)}},[t])}var w=e=>{var t=e.className,a=e.onSend,n=e.duration,c=void 0===n?30:n,M=Object(r["useState"])(c),j=o()(M,2),i=j[0],N=j[1],s=Object(r["useState"])(1e3),u=o()(s,1),I=u[0],g=Object(r["useState"])(!1),d=o()(g,2),L=d[0],O=d[1],w=Object(r["useState"])("\u83b7\u53d6\u9a8c\u8bc1\u7801"),z=o()(w,2),A=z[0],T=z[1],h=Object(r["useState"])(!1),f=o()(h,2),E=f[0],S=f[1];p(()=>{T("".concat(i-1,"s")),N(i-1),S(!0),1===i&&(O(!1),S(!1),T("\u91cd\u65b0\u53d1\u9001"))},L?I:null);var m=()=>{a&&a().then(e=>{e&&(T("".concat(c,"s")),S(!0),O(!0),N(c))})};return D.a.createElement(l["a"],{className:y()(t,"send-code"),size:"sm",disabled:E},E?A:D.a.createElement("span",{onClick:m},A))},z=a("uJMD"),A=a("2hfb"),T=a.n(A);function h(e){var t=Object(r["useReducer"])((e,t)=>N()({},e,t),{isRegistered:!0,disabled:!0,phone:"",verificationCode:""}),n=o()(t,2),M=n[0],i=n[1];Object(r["useEffect"])(()=>{M.phone&&M.verificationCode?i({disabled:!1}):i({disabled:!0})},[M.phone,M.verificationCode]);var s=(t,a)=>{i({[a]:t}),"phone"===a&&(11===t.length?e.dispatch({type:"user/checkRegistered",payload:t}).then(e=>{e||i({isRegistered:!1})}):i({isRegistered:!0}))},g=function(){var t=j()(c.a.mark(function t(){return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(Object(z["e"])(M.phone)){t.next=2;break}return t.abrupt("return");case 2:return e.dispatch({type:"user/sendCode",payload:M.phone}),t.abrupt("return",!0);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),d=()=>{if(M.phone){if(Object(z["e"])(M.phone))if(M.verificationCode){var t=z["c"].get("openId"),a={userName:M.phone,verifyCode:M.verificationCode};t&&(a.openId=t),e.dispatch({type:"user/login",payload:a}).then(e=>{e&&O.a.push("/")})}else u["a"].show("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801")}else u["a"].show("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")};return D.a.createElement("div",{className:y()(T.a.loginPage)},D.a.createElement("div",{className:"phone-control"},D.a.createElement(I["a"],{type:"tel",value:M.phone,className:"phone",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",maxLength:11,onChange:e=>s(e,"phone")}),M.phone&&D.a.createElement("img",{className:"phone-clear",src:a("wiAJ"),onClick:()=>i({phone:""}),alt:""})),D.a.createElement("div",{className:"code-control"},D.a.createElement(I["a"],{type:"tel",className:"code",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChange:e=>s(e,"verificationCode"),maxLength:6}),D.a.createElement(w,{duration:60,onSend:g})),!M.isRegistered&&D.a.createElement("p",{className:"login-tip"},"\u672a\u6ce8\u518c\u7684\u624b\u673a\u53f7\uff0c\u9a8c\u8bc1\u901a\u8fc7\u540e\u5c06\u81ea\u52a8\u6ce8\u518c"),D.a.createElement(l["a"],{block:!0,className:"login-btn",disabled:M.disabled,onClick:d},e.loading?"\u767b\u5f55\u4e2d":"\u767b\u5f55"))}t["default"]=Object(g["c"])(e=>({loading:e.loading.effects["user/login"]}))(h)},wiAJ:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMjAgMjAiIHdpZHRoPSIyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtMTAuMDAwMDYgMGMtNS41MjI4NDA2NCAwLTEwLjAwMDAwMDA0IDQuNDc3MTU5MzktMTAuMDAwMDAwMDQgMTAgMCA1LjUyMjg0MDYgNC40NzcxNTk0IDEwIDEwLjAwMDAwMDA0IDEwIDUuNTIyODQwNiAwIDEwLTQuNDc3MTU5NCAxMC0xMCAwLTUuNTIyODQwNjEtNC40NzcxNTk0LTEwLTEwLTEwem00LjYzNDA0MDUgMTIuODY2NTk0Yy40ODgyNzI0LjQ4ODI3MjQuNDg4MjcyNCAxLjI3OTI5NDEgMCAxLjc2NzU4NjUtLjI0NDE0NjIuMjQ0MTQ2Mi0uNTYzOTY0Ny4zNjYyMDkyLS44ODM3ODMyLjM2NjIwOTJzLS42Mzk2NTctLjEyMjA2MzEtLjg4Mzc4MzItLjM2NjIwOTJsLTIuODY2MjE5My0yLjg2NjIxNDMtMi44NjYyMDkyOSAyLjg2NjE5NDNjLS4yNDQxNDYxOS4yNDQxNDYyLS41NjM5NjQ3MS4zNjYyMjkyLS44ODM3ODMyMS4zNjYyMjkyLS4zMTk4MTg0OSAwLS42Mzk2NTcwMS0uMTIyMDgzLS44ODM3ODMyMi0uMzY2MjI5Mi0uNDg4MjcyMzgtLjQ4ODI3MjQtLjQ4ODI3MjM4LTEuMjc5Mjk0MSAwLTEuNzY3NTg2NGwyLjg2NjIxNDI4LTIuODY2MjA2OC0yLjg2NjIzNDI2LTIuODY2MjAxODNjLS40ODgyNzIzOC0uNDg4MjcyMzgtLjQ4ODI3MjM4LTEuMjc5Mjk0MDQgMC0xLjc2NzU4NjQxLjQ4ODI3MjM4LS40ODgyOTIzNiAxLjI3OTI5NDA0LS40ODgyNzIzOCAxLjc2NzU4NjQxIDBsMi44NjYyMDkyOSAyLjg2NjIxNDI4IDIuODY2MjE5My0yLjg2NjIxNDI4Yy40ODgyNzI0LS40ODgyNzIzOCAxLjI3OTI5NC0uNDg4MjcyMzggMS43Njc1ODY0IDAgLjQ4ODI5MjQuNDg4MjcyMzkuNDg4MjcyNCAxLjI3OTI5NDA1IDAgMS43Njc1ODY0MWwtMi44NjYyMzQzIDIuODY2MjE0MzN6IiBvcGFjaXR5PSIuMDgiLz48L3N2Zz4="}}]);